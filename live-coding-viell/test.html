<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modernisation JavaScript ES6+</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --success: #2ecc71;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .section {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary);
        }
        
        .code-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 1.5rem 0;
        }
        
        .code-block {
            flex: 1;
            min-width: 300px;
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e9ecef;
        }
        
        .code-header {
            background-color: var(--dark);
            color: white;
            padding: 0.75rem 1rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code-content {
            padding: 1rem;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .old-code {
            border-left: 4px solid var(--accent);
        }
        
        .new-code {
            border-left: 4px solid var(--success);
        }
        
        .execution-area {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid #e9ecef;
        }
        
        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            margin-top: 1rem;
            margin-right: 10px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .output {
            margin-top: 1rem;
            padding: 1rem;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            min-height: 50px;
            white-space: pre-wrap;
        }
        
        .benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .benefit-card {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .benefit-card h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        footer {
            text-align: center;
            margin-top: 3rem;
            padding: 1.5rem;
            background-color: var(--primary);
            color: white;
            border-radius: 10px 10px 0 0;
        }
        
        @media (max-width: 768px) {
            .code-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Modernisation JavaScript ES6+</h1>
            <p class="subtitle">Transformation du code classique vers des fonctionnalités modernes</p>
        </div>
    </header>

    <div class="container">
        <section class="section">
            <h2>Introduction</h2>
            <p>ES6 (ECMAScript 2015) a introduit de nombreuses fonctionnalités qui rendent le JavaScript plus expressif, concis et maintenable. Cette présentation montre comment moderniser du code JavaScript classique vers ES6+.</p>
            
            <div class="benefits">
                <div class="benefit-card">
                    <h3>Lisibilité améliorée</h3>
                    <p>Code plus concis et expressif grâce aux fonctions fléchées, déstructuration, etc.</p>
                </div>
                <div class="benefit-card">
                    <h3>Maintenance facilitée</h3>
                    <p>Structure modulaire et syntaxe claire pour un code plus facile à comprendre et modifier.</p>
                </div>
                <div class="benefit-card">
                    <h3>Performance optimisée</h3>
                    <p>Utilisation de méthodes modernes plus efficaces comme .map(), .filter(), etc.</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>1. Variables : var → let/const</h2>
            <p>Les déclarations <code>let</code> et <code>const</code> offrent une portée de bloc et évitent les problèmes de hoisting.</p>
            
            <div class="code-container">
                <div class="code-block old-code">
                    <div class="code-header">
                        <span>Code classique (var)</span>
                    </div>
                    <div class="code-content">
// Problèmes avec var
var x = 10;
if (true) {
    var x = 20; // Même variable!
    console.log(x); // 20
}
console.log(x); // 20 (modifié!)

// Hoisting problématique
console.log(y); // undefined (pas d'erreur)
var y = 5;
                    </div>
                </div>
                
                <div class="code-block new-code">
                    <div class="code-header">
                        <span>Code moderne (let/const)</span>
                    </div>
                    <div class="code-content">
// let a une portée de bloc
let a = 10;
if (true) {
    let a = 20; // Variable différente
    console.log(a); // 20
}
console.log(a); // 10 (inchangé)

// const pour les constantes
const PI = 3.14159;
// PI = 3; // Erreur!

// Pas de hoisting problématique
// console.log(z); // Erreur: Cannot access 'z' before initialization
let z = 5;
                    </div>
                </div>
            </div>
            
            <div class="execution-area">
                <h3>Exemple d'exécution</h3>
                <button onclick="runVariableExample()">Exécuter l'exemple var/let</button>
                <button onclick="runConstExample()">Tester const</button>
                <div class="output" id="variable-output"></div>
            </div>
        </section>

        <section class="section">
            <h2>2. Fonctions fléchées</h2>
            <p>Les fonctions fléchées offrent une syntaxe plus concise et lient <code>this</code> lexicalement.</p>
            
            <div class="code-container">
                <div class="code-block old-code">
                    <div class="code-header">
                        <span>Fonctions classiques</span>
                    </div>
                    <div class="code-content">
// Fonction classique
function multiply(a, b) {
    return a * b;
}

// Fonction anonyme
var numbers = [1, 2, 3];
var doubled = numbers.map(function(n) {
    return n * 2;
});

// Problème avec 'this'
function Counter() {
    this.count = 0;
    setInterval(function() {
        this.count++; // 'this' n'est pas l'instance!
        console.log(this.count);
    }, 1000);
}
                    </div>
                </div>

                <div class="code-block new-code">
                    <div class="code-header">
                        <span>Fonctions fléchées</span>
                    </div>
                    <div class="code-content">
// Fonction fléchée
const multiply = (a, b) => a * b;

// Plus concis avec les tableaux
const numbers = [1, 2, 3];
const doubled = numbers.map(n => n * 2);

// 'this' est lié lexicalement
function Counter() {
    this.count = 0;
    setInterval(() => {
        this.count++; // 'this' est correct!
        console.log(this.count);
    }, 1000);
}

// Retour implicite avec objets
const createUser = (name, age) => ({ name, age });
                    </div>
                </div>
            </div>
            
            <div class="execution-area">
                <h3>Exemple d'exécution</h3>
                <button onclick="runArrowExample()">Tester fonctions fléchées</button>
                <button onclick="runThisExample()">Tester le contexte 'this'</button>
                <div class="output" id="arrow-output"></div>
            </div>
        </section>

        <section class="section">
            <h2>3. Méthodes de tableaux : .map(), .filter(), .forEach()</h2>
            <p>Remplacer les boucles for par des méthodes fonctionnelles pour un code plus lisible.</p>
            
            <div class="code-container">
                <div class="code-block old-code">
                    <div class="code-header">
                        <span>Boucles for classiques</span>
                    </div>
                    <div class="code-content">
// Doubler les valeurs d'un tableau
var numbers = [1, 2, 3, 4, 5];
var doubled = [];
for (var i = 0; i < numbers.length; i++) {
    doubled.push(numbers[i] * 2);
}

// Filtrer les nombres pairs
var evenNumbers = [];
for (var i = 0; i < numbers.length; i++) {
    if (numbers[i] % 2 === 0) {
        evenNumbers.push(numbers[i]);
    }
}

// Afficher chaque élément
for (var i = 0; i < numbers.length; i++) {
    console.log(numbers[i]);
}
                    </div>
                </div>
                
                <div class="code-block new-code">
                    <div class="code-header">
                        <span>Méthodes fonctionnelles</span>
                    </div>
                    <div class="code-content">
// Doubler les valeurs avec .map()
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(n => n * 2);

// Filtrer avec .filter()
const evenNumbers = numbers.filter(n => n % 2 === 0);

// Parcourir avec .forEach()
numbers.forEach(n => console.log(n));

// Chaînage des méthodes
const result = numbers
    .filter(n => n % 2 === 0)
    .map(n => n * 2)
    .reduce((sum, n) => sum + n, 0);
                    </div>
                </div>
            </div>
            
            <div class="execution-area">
                <h3>Exemple d'exécution</h3>
                <button onclick="runArrayMethodsExample()">Tester les méthodes de tableaux</button>
                <div class="output" id="array-output"></div>
            </div>
        </section>

        <section class="section">
            <h2>4. Déstructuration et littéraux de gabarits</h2>
            <p>Extraire des valeurs d'objets/tableaux et créer des chaînes de manière plus expressive.</p>
            
            <div class="code-container">
                <div class="code-block old-code">
                    <div class="code-header">
                        <span>Code classique</span>
                    </div>
                    <div class="code-content">
// Accès manuel aux propriétés
var user = { name: 'Alice', age: 30 };
var name = user.name;
var age = user.age;

// Concaténation de chaînes
var message = 'Bonjour ' + name + ', vous avez ' + age + ' ans.';

// Extraction manuelle de tableau
var colors = ['rouge', 'vert', 'bleu'];
var first = colors[0];
var second = colors[1];
                    </div>
                </div>
                
                <div class="code-block new-code">
                    <div class="code-header">
                        <span>Code moderne</span>
                    </div>
                    <div class="code-content">
// Déstructuration d'objet
const user = { name: 'Alice', age: 30 };
const { name, age } = user;

// Littéraux de gabarits
const message = `Bonjour ${name}, vous avez ${age} ans.`;

// Déstructuration de tableau
const colors = ['rouge', 'vert', 'bleu'];
const [first, second] = colors;

// Déstructuration avec valeurs par défaut
const { city = 'Paris' } = user;

// Paramètres de fonction déstructurés
function displayUser({ name, age }) {
    return `${name} (${age} ans)`;
}
                    </div>
                </div>
            </div>
            
            <div class="execution-area">
                <h3>Exemple d'exécution</h3>
                <button onclick="runDestructuringExample()">Tester la déstructuration</button>
                <button onclick="runTemplateExample()">Tester les littéraux de gabarits</button>
                <div class="output" id="destructuring-output"></div>
            </div>
        </section>

        <section class="section">
            <h2>5. Modules ES6</h2>
            <p>Organiser le code en modules pour une meilleure maintenabilité.</p>
            
            <div class="code-container">
                <div class="code-block old-code">
                    <div class="code-header">
                        <span>Modules globaux (ancienne méthode)</span>
                    </div>
                    <div class="code-content">
// mathUtils.js
var MathUtils = {
    add: function(a, b) {
        return a + b;
    },
    multiply: function(a, b) {
        return a * b;
    }
};

// app.js
var result = MathUtils.add(5, 3);

// Pas d'isolation, pollution de l'espace global
                    </div>
                </div>
                
                <div class="code-block new-code">
                    <div class="code-header">
                        <span>Modules ES6</span>
                    </div>
                    <div class="code-content">
// mathUtils.js
export const add = (a, b) => a + b;
export const multiply = (a, b) => a * b;
export const PI = 3.14159;

// Ou export par défaut
export default function calculate(a, b, operation) {
    return operation(a, b);
}

// app.js
import { add, multiply, PI } from './mathUtils.js';
import calculate from './mathUtils.js';

const result = add(5, 3);

// Code isolé et réutilisable
                    </div>
                </div>
            </div>
            
            <div class="execution-area">
                <h3>Exemple d'exécution</h3>
                <button onclick="runModuleExample()">Tester les modules</button>
                <div class="output" id="module-output"></div>
            </div>
        </section>

        <section class="section">
            <h2>Conclusion</h2>
            <p>La modernisation du code JavaScript vers ES6+ offre de nombreux avantages :</p>
            <ul style="margin: 1rem 0 1rem 2rem;">
                <li>Code plus concis et lisible</li>
                <li>Meilleure maintenabilité et évolutivité</li>
                <li>Moins de bugs grâce à une portée mieux contrôlée</li>
                <li>Meilleure performance avec les méthodes modernes</li>
                <li>Développement plus productif</li>
            </ul>
            <p>En adoptant ces fonctionnalités modernes, vous écrivez du code plus robuste, plus expressif et plus facile à maintenir.</p>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>Présentation ES6+ - Modernisation du JavaScript</p>
        </div>
    </footer>

    <script>
        // 1. Exemples pour les variables
        function runVariableExample() {
            const output = document.getElementById('variable-output');
            let log = '';
            
            // Démonstration avec var
            var x = 10;
            if (true) {
                var x = 20;
                log += `À l'intérieur du bloc: x = ${x}\n`;
            }
            log += `À l'extérieur du bloc: x = ${x}\n\n`;
            
            // Démonstration avec let
            let a = 10;
            if (true) {
                let a = 20;
                log += `À l'intérieur du bloc: a = ${a}\n`;
            }
            log += `À l'extérieur du bloc: a = ${a}\n`;
            
            output.textContent = log;
        }
        
        function runConstExample() {
            const output = document.getElementById('variable-output');
            let log = '';
            
            try {
                const PI = 3.14159;
                log += `PI = ${PI}\n`;
                // Cette ligne générera une erreur
                PI = 3;
                log += 'Cette ligne ne sera jamais exécutée';
            } catch (error) {
                log += `Erreur: ${error.message}\n`;
                log += 'const empêche la réaffectation!';
            }
            
            output.textContent = log;
        }
        
        // 2. Exemples pour les fonctions fléchées
        function runArrowExample() {
            const output = document.getElementById('arrow-output');
            let log = '';
            
            // Fonction classique
            function multiplyClassic(a, b) {
                return a * b;
            }
            
            // Fonction fléchée
            const multiplyArrow = (a, b) => a * b;
            
            log += `Fonction classique: 5 * 3 = ${multiplyClassic(5, 3)}\n`;
            log += `Fonction fléchée: 5 * 3 = ${multiplyArrow(5, 3)}\n\n`;
            
            // Utilisation avec map
            const numbers = [1, 2, 3];
            const doubled = numbers.map(n => n * 2);
            log += `Tableau doublé: [${doubled.join(', ')}]`;
            
            output.textContent = log;
        }
        
        function runThisExample() {
            const output = document.getElementById('arrow-output');
            let log = '';
            
            // Problème avec les fonctions classiques
            function OldCounter() {
                this.count = 0;
                setInterval(function() {
                    try {
                        this.count++;
                        log += `Ancien compteur: ${this.count}\n`;
                    } catch (e) {
                        log += 'Erreur: this.count non défini (mauvais contexte)\n';
                    }
                }, 500);
            }
            
            // Solution avec fonctions fléchées
            function NewCounter() {
                this.count = 0;
                setInterval(() => {
                    this.count++;
                    log += `Nouveau compteur: ${this.count}\n`;
                }, 500);
            }
            
            log += "Test du contexte 'this':\n\n";
            
            // Démarrer les compteurs
            const oldCounter = new OldCounter();
            const newCounter = new NewCounter();
            
            // Arrêter après 2 secondes
            setTimeout(() => {
                output.textContent = log;
            }, 2000);
        }
        
        // 3. Exemples pour les méthodes de tableaux
        function runArrayMethodsExample() {
            const output = document.getElementById('array-output');
            let log = '';
            
            const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            
            log += `Tableau original: [${numbers.join(', ')}]\n\n`;
            
            // Utilisation de filter et map
            const result = numbers
                .filter(n => n % 2 === 0)  // Nombres pairs
                .map(n => n * 3)           // Multiplier par 3
                .filter(n => n > 10);      // Garder ceux > 10
            
            log += `Nombres pairs * 3 > 10: [${result.join(', ')}]\n\n`;
            
            // Utilisation de reduce
            const sum = numbers.reduce((acc, n) => acc + n, 0);
            log += `Somme de tous les nombres: ${sum}\n`;
            
            // Utilisation de forEach
            log += 'Éléments du tableau:\n';
            numbers.forEach((n, index) => {
                log += `  [${index}]: ${n}\n`;
            });
            
            output.textContent = log;
        }
        
        // 4. Exemples pour déstructuration et littéraux de gabarits
        function runDestructuringExample() {
            const output = document.getElementById('destructuring-output');
            let log = '';
            
            const user = {
                name: 'Alice',
                age: 30,
                email: 'alice@example.com'
            };
            
            // Déstructuration d'objet
            const { name, age, city = 'Paris' } = user;
            
            log += `Nom: ${name}\n`;
            log += `Âge: ${age}\n`;
            log += `Ville (par défaut): ${city}\n\n`;
            
            // Déstructuration de tableau
            const colors = ['rouge', 'vert', 'bleu', 'jaune'];
            const [first, second, ...rest] = colors;
            
            log += `Première couleur: ${first}\n`;
            log += `Deuxième couleur: ${second}\n`;
            log += `Reste: [${rest.join(', ')}]\n`;
            
            output.textContent = log;
        }
        
        function runTemplateExample() {
            const output = document.getElementById('destructuring-output');
            let log = '';
            
            const product = {
                name: 'Ordinateur portable',
                price: 999,
                brand: 'TechCorp'
            };
            
            // Ancienne méthode de concaténation
            const oldMessage = 'Produit: ' + product.name + ', Marque: ' + product.brand + ', Prix: ' + product.price + '€';
            
            // Nouvelle méthode avec littéraux de gabarits
            const newMessage = `Produit: ${product.name}, Marque: ${product.brand}, Prix: ${product.price}€`;
            
            // Expressions complexes
            const discountMessage = `Prix après réduction: ${product.price * 0.8}€ (20% de réduction!)`;
            
            // Multi-lignes
            const multiLineMessage = `Détails du produit:
  - Nom: ${product.name}
  - Marque: ${product.brand}
  - Prix: ${product.price}€`;
            
            log += "Ancienne concaténation:\n" + oldMessage + "\n\n";
            log += "Littéraux de gabarits:\n" + newMessage + "\n\n";
            log += "Avec expressions:\n" + discountMessage + "\n\n";
            log += "Multi-lignes:\n" + multiLineMessage;
            
            output.textContent = log;
        }
        
        // 5. Exemple pour les modules (simulé)
        function runModuleExample() {
            const output = document.getElementById('module-output');
            let log = '';
            
            // Simulation de l'import/export de modules
            const mathUtils = {
                add: (a, b) => a + b,
                multiply: (a, b) => a * b,
                PI: 3.14159
            };
            
            // Utilisation des "modules"
            const sum = mathUtils.add(10, 5);
            const product = mathUtils.multiply(4, 7);
            const circleArea = mathUtils.PI * 5 * 5;
            
            log += "Utilisation des modules ES6 (simulé):\n\n";
            log += `Addition: 10 + 5 = ${sum}\n`;
            log += `Multiplication: 4 * 7 = ${product}\n`;
            log += `Aire d'un cercle (rayon=5): ${circleArea.toFixed(2)}\n\n`;
            log += "Avantages des modules:\n";
            log += "- Code organisé et modulaire\n";
            log += "- Évite la pollution de l'espace global\n";
            log += "- Facilite la réutilisation du code\n";
            log += "- Meilleure maintenabilité";
            
            output.textContent = log;
        }
    </script>
</body>
</html>